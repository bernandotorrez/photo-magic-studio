# Beauty Enhancement Guide ðŸ’„

## Overview

Beauty Enhancement adalah fitur baru yang memungkinkan transformasi hair style dan makeup pada foto portrait. Sistem ini menggunakan AI untuk mendeteksi gender dan memberikan pilihan enhancement yang sesuai.

## Kategori Beauty

### 1. Hair Style - Male (15 Styles)
Pilihan gaya rambut untuk pria:

- **ðŸ’‡â€â™‚ï¸ Classic Pompadour** - Gaya rambut pompadour klasik dengan volume di atas
- **ðŸ’‡â€â™‚ï¸ Modern Undercut** - Undercut modern dengan sisi pendek
- **ðŸ’‡â€â™‚ï¸ Fade Haircut** - Potongan fade dengan gradasi
- **ðŸ’‡â€â™‚ï¸ Crew Cut** - Crew cut pendek dan rapi
- **ðŸ’‡â€â™‚ï¸ Textured Quiff** - Quiff bertekstur dengan volume
- **ðŸ’‡â€â™‚ï¸ Slick Back** - Rambut disisir ke belakang
- **ðŸ’‡â€â™‚ï¸ Side Part** - Side part klasik profesional
- **ðŸ’‡â€â™‚ï¸ Messy Textured** - Gaya messy natural
- **ðŸ’‡â€â™‚ï¸ Buzz Cut** - Buzz cut sangat pendek
- **ðŸ’‡â€â™‚ï¸ Man Bun** - Man bun modern
- **ðŸ’‡â€â™‚ï¸ Curly Top** - Rambut keriting di atas
- **ðŸ’‡â€â™‚ï¸ French Crop** - French crop modern
- **ðŸ’‡â€â™‚ï¸ Mohawk/Faux Hawk** - Mohawk berani
- **ðŸ’‡â€â™‚ï¸ Ivy League** - Ivy League sophisticated
- **ðŸ’‡â€â™‚ï¸ Spiky Hair** - Rambut spike berdiri

### 2. Hair Style - Female (20 Styles)
Pilihan gaya rambut untuk wanita:

- **ðŸ’‡â€â™€ï¸ Long Straight Hair** - Rambut panjang lurus mengkilap
- **ðŸ’‡â€â™€ï¸ Beach Waves** - Beach waves natural
- **ðŸ’‡â€â™€ï¸ Voluminous Curls** - Rambut keriting voluminous
- **ðŸ’‡â€â™€ï¸ Bob Cut** - Bob cut modern
- **ðŸ’‡â€â™€ï¸ Pixie Cut** - Pixie cut pendek
- **ðŸ’‡â€â™€ï¸ Layered Cut** - Potongan layer bertingkat
- **ðŸ’‡â€â™€ï¸ High Ponytail** - Ponytail tinggi
- **ðŸ’‡â€â™€ï¸ Messy Bun** - Messy bun chic
- **ðŸ’‡â€â™€ï¸ Braided Hair** - Gaya rambut kepang
- **ðŸ’‡â€â™€ï¸ Half-Up Half-Down** - Half-up half-down
- **ðŸ’‡â€â™€ï¸ Sleek Low Bun** - Low bun elegant
- **ðŸ’‡â€â™€ï¸ Side Swept** - Side swept glamor
- **ðŸ’‡â€â™€ï¸ Bangs/Fringe** - Tambahkan poni/fringe
- **ðŸ’‡â€â™€ï¸ Balayage Highlights** - Highlight balayage
- **ðŸ’‡â€â™€ï¸ Ombre Color** - Warna ombre gradasi
- **ðŸ’‡â€â™€ï¸ Vintage Hollywood Waves** - Vintage Hollywood waves
- **ðŸ’‡â€â™€ï¸ Shag Cut** - Shag cut bertekstur
- **ðŸ’‡â€â™€ï¸ Top Knot** - Top knot modern
- **ðŸ’‡â€â™€ï¸ Space Buns** - Space buns playful
- **ðŸ’‡â€â™€ï¸ Ultra Sleek Straight** - Ultra sleek straight

### 3. Make Up (25 Options)
Pilihan makeup dengan dukungan custom prompt untuk warna:

#### Face Makeup
- **ðŸ’„ Natural Makeup Look** - Makeup natural sehari-hari
- **ðŸ’„ Glamorous Evening Makeup** - Makeup glamor malam
- **âœ¨ Contour & Highlight** - Contour dan highlight profesional
- **âœ¨ Dewy Glowing Skin** - Kulit glowing dewy
- **âœ¨ Matte Flawless Skin** - Kulit matte flawless
- **ðŸŒ¸ Rosy Blush Cheeks** - Blush on pipi merona (custom warna)
- **ðŸŒ¸ Bronzed Sun-Kissed** - Bronzer sun-kissed

#### Eye Makeup
- **ðŸ’„ Smokey Eyes** - Smokey eyes dramatis
- **ðŸ‘ï¸ Cat Eye Liner** - Eyeliner cat eye
- **ðŸ‘ï¸ Natural Eye Makeup** - Makeup mata natural
- **ðŸ‘ï¸ Colorful Eye Makeup** - Makeup mata warna-warni (custom warna)
- **ðŸ‘ï¸ Glitter Eye Makeup** - Makeup mata glitter
- **ðŸ‘ï¸ Cut Crease Eye** - Cut crease dramatis

#### Lip Makeup (Mendukung Custom Warna)
- **ðŸ’‹ Bold Red Lips** - Lipstik merah bold
- **ðŸ’‹ Nude/Natural Lips** - Lipstik nude natural
- **ðŸ’‹ Pink Lips** - Lipstik pink
- **ðŸ’‹ Berry/Plum Lips** - Lipstik berry/plum
- **ðŸ’‹ Glossy Lips** - Lipstik glossy mengkilap
- **ðŸ’‹ Matte Lips** - Lipstik matte

#### Style Makeup
- **ðŸŽ€ Korean Beauty Style** - Makeup style Korea
- **ðŸŽ¨ Editorial/Artistic Makeup** - Makeup editorial artistik
- **ðŸ‘° Bridal Makeup** - Makeup pengantin
- **âœ¨ No-Makeup Makeup** - Makeup natural "no-makeup"
- **ðŸŽ‰ Festival/Party Makeup** - Makeup festival fun
- **ðŸ•°ï¸ Vintage/Retro Makeup** - Makeup vintage retro

## Custom Prompt Support

Beberapa enhancement makeup mendukung custom prompt untuk spesifikasi warna:

### Contoh Custom Prompt untuk Lipstik:
```json
{
  "enhancementIds": ["makeup_bold_red_lips"],
  "customPrompt": "dark burgundy red with matte finish"
}
```

### Contoh Custom Prompt untuk Eye Makeup:
```json
{
  "enhancementIds": ["makeup_colorful_eye"],
  "customPrompt": "purple and gold eyeshadow with shimmer"
}
```

### Contoh Custom Prompt untuk Blush:
```json
{
  "enhancementIds": ["makeup_rosy_cheeks"],
  "customPrompt": "peachy coral blush"
}
```

## API Endpoints

### 1. Classify Beauty Image (Deteksi Gender)

**Endpoint:** `POST /classify-beauty`

**Request:**
```json
{
  "imageUrl": "https://example.com/portrait.jpg"
}
```

**Response:**
```json
{
  "classification": "beauty",
  "gender": "female",
  "detectedLabel": "woman",
  "classificationSuccess": true,
  "subcategories": {
    "hair_style": [
      {
        "id": "uuid",
        "enhancement_type": "hair_style_female_long_straight",
        "display_name": "ðŸ’‡â€â™€ï¸ Long Straight Hair",
        "description": "Rambut panjang lurus mengkilap",
        "supports_custom_prompt": false
      }
    ],
    "makeup": [
      {
        "id": "uuid",
        "enhancement_type": "makeup_natural_look",
        "display_name": "ðŸ’„ Natural Makeup Look",
        "description": "Makeup natural sehari-hari",
        "supports_custom_prompt": true
      }
    ]
  },
  "enhancementOptions": [...]
}
```

### 2. Generate Beauty Enhancement

**Endpoint:** `POST /generate-enhanced-image`

**Request (Hair Style):**
```json
{
  "imageUrl": "https://example.com/portrait.jpg",
  "enhancementIds": ["hair_style_female_beach_waves"],
  "classification": "beauty"
}
```

**Request (Makeup dengan Custom Prompt):**
```json
{
  "imageUrl": "https://example.com/portrait.jpg",
  "enhancementIds": ["makeup_bold_red_lips", "makeup_smokey_eyes"],
  "classification": "beauty",
  "customPrompt": "deep wine red lipstick with matte finish"
}
```

**Request (Multiple Enhancements):**
```json
{
  "imageUrl": "https://example.com/portrait.jpg",
  "enhancementIds": [
    "hair_style_female_beach_waves",
    "makeup_natural_look",
    "makeup_pink_lips"
  ],
  "classification": "beauty",
  "customPrompt": "soft pink lipstick, rose gold eyeshadow"
}
```

**Response:**
```json
{
  "generatedImageUrl": "https://storage.supabase.co/...",
  "prompt": "Transform the hairstyle to beach waves..."
}
```

## Frontend Integration

### 1. Classify Image untuk Beauty
```typescript
const classifyBeautyImage = async (imageUrl: string) => {
  const response = await supabase.functions.invoke('classify-beauty', {
    body: { imageUrl }
  });
  
  return response.data;
};
```

### 2. Generate dengan Hair Style
```typescript
const generateHairStyle = async (imageUrl: string, enhancementId: string) => {
  const response = await supabase.functions.invoke('generate-enhanced-image', {
    body: {
      imageUrl,
      enhancementIds: [enhancementId],
      classification: 'beauty'
    }
  });
  
  return response.data;
};
```

### 3. Generate dengan Makeup + Custom Color
```typescript
const generateMakeup = async (
  imageUrl: string, 
  enhancementId: string,
  customColor: string
) => {
  const response = await supabase.functions.invoke('generate-enhanced-image', {
    body: {
      imageUrl,
      enhancementIds: [enhancementId],
      classification: 'beauty',
      customPrompt: customColor
    }
  });
  
  return response.data;
};
```

### 4. UI Component Example
```typescript
// Beauty Enhancement Selector
const BeautyEnhancementSelector = ({ gender, onSelect }) => {
  const [selectedCategory, setSelectedCategory] = useState('hair_style');
  const [customColor, setCustomColor] = useState('');
  
  return (
    <div>
      {/* Category Tabs */}
      <Tabs value={selectedCategory} onValueChange={setSelectedCategory}>
        <TabsList>
          <TabsTrigger value="hair_style">
            Hair Style
          </TabsTrigger>
          <TabsTrigger value="makeup">
            Make Up
          </TabsTrigger>
        </TabsList>
        
        {/* Hair Style Options */}
        <TabsContent value="hair_style">
          {gender === 'male' ? (
            <MaleHairStyleOptions onSelect={onSelect} />
          ) : (
            <FemaleHairStyleOptions onSelect={onSelect} />
          )}
        </TabsContent>
        
        {/* Makeup Options */}
        <TabsContent value="makeup">
          <MakeupOptions 
            onSelect={onSelect}
            customColor={customColor}
            onColorChange={setCustomColor}
          />
        </TabsContent>
      </Tabs>
    </div>
  );
};
```

## Database Schema

### Enhancement Prompts Table
```sql
CREATE TABLE enhancement_prompts (
  id UUID PRIMARY KEY,
  enhancement_type TEXT UNIQUE,
  display_name TEXT,
  prompt_template TEXT,
  description TEXT,
  category TEXT, -- 'hair_style_male', 'hair_style_female', 'makeup'
  sort_order INTEGER,
  supports_custom_prompt BOOLEAN DEFAULT false,
  is_active BOOLEAN DEFAULT true
);
```

### Category Enhancements Mapping
```sql
CREATE TABLE category_enhancements (
  id UUID PRIMARY KEY,
  category_id UUID REFERENCES image_categories(id),
  enhancement_id UUID REFERENCES enhancement_prompts(id),
  sort_order INTEGER,
  UNIQUE(category_id, enhancement_id)
);
```

## Testing

### 1. Test Gender Detection
```bash
curl -X POST https://your-project.supabase.co/functions/v1/classify-beauty \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_ANON_KEY" \
  -d '{
    "imageUrl": "https://example.com/male-portrait.jpg"
  }'
```

### 2. Test Hair Style Generation
```bash
curl -X POST https://your-project.supabase.co/functions/v1/generate-enhanced-image \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://example.com/portrait.jpg",
    "enhancementIds": ["hair_style_female_beach_waves"],
    "classification": "beauty"
  }'
```

### 3. Test Makeup with Custom Color
```bash
curl -X POST https://your-project.supabase.co/functions/v1/generate-enhanced-image \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "imageUrl": "https://example.com/portrait.jpg",
    "enhancementIds": ["makeup_bold_red_lips"],
    "classification": "beauty",
    "customPrompt": "burgundy red with matte finish"
  }'
```

## Best Practices

### 1. Gender Detection
- Sistem otomatis mendeteksi gender dari foto
- Default ke female jika tidak terdeteksi
- User bisa manual override jika deteksi salah

### 2. Custom Prompt
- Gunakan deskripsi warna yang spesifik
- Contoh bagus: "soft pink", "deep burgundy", "coral peach"
- Hindari deskripsi ambigu: "nice color", "pretty"

### 3. Multiple Enhancements
- Bisa combine hair style + makeup
- Maksimal 3-4 enhancements sekaligus untuk hasil optimal
- Contoh: beach waves + natural makeup + pink lips

### 4. Image Quality
- Gunakan foto portrait dengan wajah jelas
- Pencahayaan yang baik
- Resolusi minimal 512x512px

## Troubleshooting

### Gender Detection Salah
**Solusi:** Tambahkan parameter `forceGender` di request:
```json
{
  "imageUrl": "...",
  "forceGender": "male"
}
```

### Custom Color Tidak Terpakai
**Pastikan:**
- Enhancement yang dipilih support custom prompt
- Check field `supports_custom_prompt: true`
- Format customPrompt sudah benar

### Enhancement Tidak Muncul
**Check:**
1. SQL sudah dijalankan dengan benar
2. Category mapping sudah dibuat
3. Enhancement is_active = true

## Roadmap

### Phase 1 (Current)
- âœ… Gender detection
- âœ… Hair style enhancements (male & female)
- âœ… Makeup enhancements
- âœ… Custom color support

### Phase 2 (Planned)
- ðŸ”„ Face shape detection untuk rekomendasi hair style
- ðŸ”„ Skin tone detection untuk rekomendasi makeup
- ðŸ”„ Virtual try-on untuk accessories
- ðŸ”„ Before/After comparison slider

### Phase 3 (Future)
- ðŸ“‹ AI-powered style recommendations
- ðŸ“‹ Seasonal trend suggestions
- ðŸ“‹ Celebrity look-alike styling
- ðŸ“‹ Video support untuk hair/makeup tutorials

## Support

Untuk bantuan lebih lanjut:
- WhatsApp: +62 896-8761-0639
- Email: support@pixelnova.ai
- Documentation: https://docs.pixelnova.ai

---

**Last Updated:** December 2025
**Version:** 1.0.0
